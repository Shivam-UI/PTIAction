{"ast":null,"code":"import * as React from 'react';\nimport { memo, forwardRef, useRef, useEffect, useMemo, createElement, createContext, useContext, useState } from 'react';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction getSelectedNode() {\n  if (document.selection) {\n    return document.selection.createRange().parentElement();\n  }\n\n  var selection = window.getSelection();\n\n  if (selection.rangeCount > 0) {\n    return selection.getRangeAt(0).startContainer.parentNode;\n  }\n\n  return null;\n}\n\nfunction normalizeHtml(str) {\n  return str && str.replace(/&nbsp;|\\u202F|\\u00A0/g, ' ');\n}\n\nfunction replaceCaret(el) {\n  // Place the caret at the end of the element\n  var target = document.createTextNode('');\n  el.appendChild(target); // do not move caret if element was not focused\n\n  var isTargetFocused = document.activeElement === el;\n\n  if (target !== null && target.nodeValue !== null && isTargetFocused) {\n    var sel = window.getSelection();\n\n    if (sel !== null) {\n      var range = document.createRange();\n      range.setStart(target, target.nodeValue.length);\n      range.collapse(true);\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n\n    if (el instanceof HTMLElement) el.focus();\n  }\n}\n/* eslint-disable react/prop-types */\n\n/**\r\n * Based on https://github.com/lovasoa/react-contenteditable\r\n * A simple component for an html element with editable contents.\r\n */\n\n\nvar ContentEditable = memo(forwardRef(function ContentEditable(_a, ref) {\n  var className = _a.className,\n      disabled = _a.disabled,\n      onBlur = _a.onBlur,\n      onKeyDown = _a.onKeyDown,\n      onKeyUp = _a.onKeyUp,\n      tagName = _a.tagName,\n      value = _a.value,\n      rest = __rest(_a, [\"className\", \"disabled\", \"onBlur\", \"onKeyDown\", \"onKeyUp\", \"tagName\", \"value\"]);\n\n  var elRef = useRef();\n  var htmlRef = useRef(value);\n  useEffect(function () {\n    var el = elRef.current;\n\n    if (el && normalizeHtml(htmlRef.current) !== normalizeHtml(value)) {\n      htmlRef.current = value;\n      el.innerHTML = value;\n      replaceCaret(el);\n    }\n  });\n  return useMemo(function () {\n    function onSetRef($el) {\n      elRef.current = $el;\n\n      if (typeof ref === 'function') {\n        ref($el);\n      } else if (typeof ref === 'object') {\n        // eslint-disable-next-line no-param-reassign\n        ref.current = $el;\n      }\n    }\n\n    function onChange(event) {\n      var _a;\n\n      var el = elRef.current;\n\n      if (!el) {\n        return;\n      }\n\n      var elementHtml = el.innerHTML;\n\n      if (elementHtml !== htmlRef.current) {\n        (_a = rest.onChange) === null || _a === void 0 ? void 0 : _a.call(rest, __assign(__assign({}, event), {\n          target: {\n            value: elementHtml,\n            name: rest.name\n          }\n        }));\n      }\n\n      htmlRef.current = elementHtml;\n    }\n\n    return createElement(tagName || 'div', __assign(__assign({}, rest), {\n      className: className,\n      contentEditable: !disabled,\n      dangerouslySetInnerHTML: {\n        __html: value\n      },\n      onBlur: onBlur || onChange,\n      onInput: onChange,\n      onKeyDown: onKeyDown || onChange,\n      onKeyUp: onKeyUp || onChange,\n      ref: onSetRef\n    })); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [className, disabled, onBlur, onKeyDown, onKeyUp, tagName]);\n}));\nvar EditorContext = createContext(null);\n\nfunction EditorProvider(_a) {\n  var children = _a.children;\n\n  var _b = useState({\n    htmlMode: false,\n    update: update\n  }),\n      state = _b[0],\n      setState = _b[1];\n\n  function update(attrs) {\n    setState(function (prevState) {\n      return __assign(__assign(__assign({}, prevState), attrs), {\n        date: Date.now()\n      });\n    });\n  }\n\n  return React.createElement(EditorContext.Provider, {\n    value: state\n  }, children);\n}\n\nfunction useEditorState() {\n  return useContext(EditorContext);\n}\n\nfunction HtmlEditor(_a) {\n  var rest = __rest(_a, []);\n\n  return React.createElement(\"textarea\", __assign({}, rest));\n}\n\nvar e = [],\n    t = [];\n\nfunction n(n, r) {\n  if (n && \"undefined\" != typeof document) {\n    var a,\n        s = !0 === r.prepend ? \"prepend\" : \"append\",\n        d = !0 === r.singleTag,\n        i = \"string\" == typeof r.container ? document.querySelector(r.container) : document.getElementsByTagName(\"head\")[0];\n\n    if (d) {\n      var u = e.indexOf(i);\n      -1 === u && (u = e.push(i) - 1, t[u] = {}), a = t[u] && t[u][s] ? t[u][s] : t[u][s] = c();\n    } else a = c();\n\n    65279 === n.charCodeAt(0) && (n = n.substring(1)), a.styleSheet ? a.styleSheet.cssText += n : a.appendChild(document.createTextNode(n));\n  }\n\n  function c() {\n    var e = document.createElement(\"style\");\n    if (e.setAttribute(\"type\", \"text/css\"), r.attributes) for (var t = Object.keys(r.attributes), n = 0; n < t.length; n++) e.setAttribute(t[n], r.attributes[t[n]]);\n    var a = \"prepend\" === s ? \"afterbegin\" : \"beforeend\";\n    return i.insertAdjacentElement(a, e), e;\n  }\n}\n\nvar css = \".rsw-editor{border:1px solid #ddd;border-radius:.375rem;display:flex;flex-direction:column;min-height:100px;overflow:hidden}.rsw-ce{flex:1 0 auto;outline:none;padding:.5rem}.rsw-ce[contentEditable=true]:empty:not(:focus):before{color:grey;content:attr(placeholder)}.rsw-html{background:transparent;border:none;font-family:monospace,Courier New}.rsw-separator{align-self:stretch;border-right:1px solid #ddd;display:flex;margin:0 3px}.rsw-dd{box-sizing:border-box;outline:none}.rsw-btn{background:transparent;border:0;color:#222;cursor:pointer;font-size:1em;height:2em;outline:none;padding:0;width:2em}.rsw-btn:hover{background:#eaeaea}.rsw-btn[data-active=true]{background:#e0e0e0}.rsw-toolbar{align-items:center;background-color:#f5f5f5;border-bottom:1px solid #ddd;display:flex}\";\nn(css, {});\n\nfunction Editor(_a) {\n  var children = _a.children,\n      onSelect = _a.onSelect,\n      rest = __rest(_a, [\"children\", \"onSelect\"]);\n\n  var editorState = useEditorState();\n  useEffect(function () {\n    document.addEventListener('click', onClickOutside);\n    return function () {\n      return document.removeEventListener('click', onClickOutside);\n    };\n  });\n\n  function onClickOutside(event) {\n    var _a;\n\n    if (event.target === editorState.$el) {\n      return;\n    }\n\n    if ((_a = editorState.$el) === null || _a === void 0 ? void 0 : _a.contains(event.target)) {\n      return;\n    }\n\n    editorState.update({\n      $selection: null\n    });\n  }\n\n  function onTextSelect(event) {\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(event);\n    editorState.update({\n      $selection: getSelectedNode()\n    });\n  }\n\n  function setContentEditableRef($el) {\n    editorState.update({\n      $el: $el\n    });\n  }\n\n  if (editorState.htmlMode) {\n    return React.createElement(\"div\", {\n      className: \"rsw-editor\"\n    }, children, React.createElement(HtmlEditor, __assign({}, rest, {\n      className: \"rsw-ce rsw-html\"\n    })));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"rsw-editor\"\n  }, children, React.createElement(ContentEditable, __assign({}, rest, {\n    ref: setContentEditableRef,\n    onSelect: onTextSelect,\n    className: \"rsw-ce\"\n  })));\n}\n\nfunction OrderedListIcon() {\n  return React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"20\",\n    height: \"20\",\n    viewBox: \"0 0 24 24\",\n    style: {\n      verticalAlign: 'text-top'\n    }\n  }, React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M6.99938 12.998v-2H20.9994v2H6.99938zm0 6.0001v-2H20.9994v2H6.99938zm0-12.00001v-2H20.9994v2H6.99938zm-4 1v-3h-1v-1h2v4h-1zm-1 9.00001v-1h3v4h-3v-1h2v-.5h-1v-1h1v-.5h-2zM4.25 10c.41421 0 .75.3358.75.75 0 .2024-.08017.3861-.2105.521L3.11983 13H5v1H2v-.9218L4 11H2v-1h2.25z\"\n  }));\n}\n\nfunction UnorderedListIcon() {\n  return React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"20\",\n    height: \"20\",\n    viewBox: \"0 0 24 24\",\n    style: {\n      verticalAlign: 'text-top'\n    }\n  }, React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M7 5h14v2H7V5zm0 8v-2h14v2H7zM4 4.50001c.83 0 1.5.66992 1.5 1.5 0 .83007-.67 1.5-1.5 1.5s-1.5-.66993-1.5-1.5c0-.83008.67-1.5 1.5-1.5zM4 10.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zM7 19v-2h14v2H7zm-3-2.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5z\"\n  }));\n}\n\nvar BtnBold = createButton('Bold', '𝐁', 'bold');\nvar BtnBulletList = createButton('Bullet list', React.createElement(UnorderedListIcon, null), 'insertUnorderedList');\nvar BtnClearFormatting = createButton('Clear formatting', 'T̲ₓ', 'removeFormat');\nvar BtnItalic = createButton('Italic', '𝑰', 'italic');\nvar BtnLink = createButton('Link', '🔗', function (_a) {\n  var $selection = _a.$selection;\n\n  if (($selection === null || $selection === void 0 ? void 0 : $selection.nodeName) === 'A') {\n    document.execCommand('unlink');\n  } else {\n    // eslint-disable-next-line no-alert\n    document.execCommand('createLink', false, prompt('URL', ''));\n  }\n});\nvar BtnNumberedList = createButton('Numbered list', React.createElement(OrderedListIcon, null), 'insertOrderedList');\nvar BtnRedo = createButton('Redo', '↷', 'redo');\nvar BtnUnderline = createButton('Underline', React.createElement(\"span\", {\n  style: {\n    textDecoration: 'underline'\n  }\n}, \"\\uD835\\uDC14\"), 'underline');\nvar BtnUndo = createButton('Undo', '↶', 'undo');\n\nfunction createButton(title, content, command) {\n  ButtonFactory.displayName = title.replace(/\\s/g, '');\n  return ButtonFactory;\n\n  function ButtonFactory(props) {\n    var editorState = useEditorState();\n    var $selection = editorState.$selection;\n    var active = false;\n\n    if (typeof command === 'string') {\n      active = !!$selection && document.queryCommandState(command);\n    }\n\n    function onAction() {\n      if (typeof command === 'function') {\n        command(editorState);\n      } else {\n        document.execCommand(command);\n      }\n    }\n\n    if (editorState.htmlMode) {\n      return null;\n    }\n\n    return React.createElement(\"button\", __assign({\n      type: \"button\",\n      title: title\n    }, props, {\n      className: \"rsw-btn\",\n      onMouseDown: onAction,\n      \"data-active\": active\n    }), content);\n  }\n}\n\nvar BtnStyles = createDropdown('Styles', [['Normal', 'formatBlock', 'DIV'], ['𝗛𝗲𝗮𝗱𝗲𝗿 𝟭', 'formatBlock', 'H1'], ['Header 2', 'formatBlock', 'H2'], ['𝙲𝚘𝚍𝚎', 'formatBlock', 'PRE']]);\n\nfunction createDropdown(title, items) {\n  DropdownFactory.displayName = title;\n  return DropdownFactory;\n\n  function DropdownFactory(props) {\n    var editorState = useEditorState();\n\n    if (editorState.htmlMode) {\n      return null;\n    }\n\n    return React.createElement(Dropdown, __assign({}, props, {\n      onChange: onChange,\n      title: title,\n      items: items\n    }));\n\n    function onChange(e) {\n      var selected = parseInt(e.target.value, 10);\n      var _a = items[selected],\n          command = _a[1],\n          commandArgument = _a[2];\n      e.preventDefault();\n      e.target.selectedIndex = 0;\n\n      if (typeof command === 'function') {\n        command(editorState);\n      } else {\n        document.execCommand(command, false, commandArgument);\n      }\n    }\n  }\n}\n\nfunction Dropdown(_a) {\n  var items = _a.items,\n      selected = _a.selected,\n      inputProps = __rest(_a, [\"items\", \"selected\"]);\n\n  return React.createElement(\"select\", __assign({}, inputProps, {\n    value: selected,\n    className: \"rsw-dd\"\n  }), React.createElement(\"option\", {\n    hidden: true\n  }, inputProps.title), items.map(function (item, index) {\n    return React.createElement(\"option\", {\n      key: item[2],\n      value: index\n    }, item[0]);\n  }));\n}\n\nfunction HtmlButton(_a) {\n  var rest = __rest(_a, []);\n\n  var editorState = useEditorState();\n\n  function onClick() {\n    editorState.update({\n      htmlMode: !editorState.htmlMode\n    });\n  }\n\n  return React.createElement(\"button\", __assign({\n    type: \"button\",\n    title: \"HTML mode\",\n    className: \"rsw-btn\",\n    onClick: onClick,\n    \"data-active\": editorState.htmlMode\n  }, rest), \"</>\");\n}\n\nfunction Separator() {\n  var editorState = useEditorState();\n\n  if (editorState.htmlMode) {\n    return null;\n  }\n\n  return React.createElement(\"div\", {\n    className: \"rsw-separator\"\n  });\n}\n\nfunction Toolbar(props) {\n  return React.createElement(\"div\", __assign({}, props, {\n    className: \"rsw-toolbar\"\n  }));\n}\n\nfunction DefaultEditor(props) {\n  return React.createElement(EditorProvider, null, React.createElement(Editor, __assign({}, props), React.createElement(Toolbar, null, React.createElement(BtnUndo, null), React.createElement(BtnRedo, null), React.createElement(Separator, null), React.createElement(BtnBold, null), React.createElement(BtnItalic, null), React.createElement(BtnUnderline, null), React.createElement(Separator, null), React.createElement(BtnNumberedList, null), React.createElement(BtnBulletList, null), React.createElement(Separator, null), React.createElement(BtnLink, null), React.createElement(BtnClearFormatting, null), React.createElement(HtmlButton, null), React.createElement(Separator, null), React.createElement(BtnStyles, null))));\n}\n\nexport { BtnBold, BtnBulletList, BtnClearFormatting, BtnItalic, BtnLink, BtnNumberedList, BtnRedo, BtnStyles, BtnUnderline, BtnUndo, ContentEditable, DefaultEditor, Dropdown, Editor, EditorContext, EditorProvider, HtmlButton, HtmlEditor, Separator, Toolbar, useEditorState };","map":{"version":3,"mappings":"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","names":["getSelectedNode","document","selection","createRange","parentElement","window","getSelection","rangeCount","getRangeAt","startContainer","parentNode","normalizeHtml","str","replace","replaceCaret","el","target","createTextNode","appendChild","isTargetFocused","activeElement","nodeValue","sel","range","setStart","length","collapse","removeAllRanges","addRange","HTMLElement","focus","ContentEditable","memo","forwardRef","_a","ref","disabled","onBlur","onKeyDown","onKeyUp","tagName","value","rest","elRef","useRef","htmlRef","useEffect","current","innerHTML","useMemo","onSetRef","$el","onChange","event","elementHtml","__assign","name","createElement","className","contentEditable","dangerouslySetInnerHTML","__html","onInput","EditorContext","createContext","EditorProvider","children","useState","htmlMode","update","state","setState","attrs","prevState","date","Date","now","React","Provider","useEditorState","useContext","HtmlEditor","e","t","n","r","a","s","prepend","d","singleTag","i","container","querySelector","getElementsByTagName","u","indexOf","push","c","charCodeAt","substring","styleSheet","cssText","setAttribute","attributes","Object","keys","insertAdjacentElement","Editor","onSelect","editorState","addEventListener","onClickOutside","removeEventListener","contains","$selection","onTextSelect","setContentEditableRef","OrderedListIcon","xmlns","width","height","viewBox","style","verticalAlign","fill","UnorderedListIcon","BtnBold","createButton","BtnBulletList","BtnClearFormatting","BtnItalic","BtnLink","nodeName","execCommand","prompt","BtnNumberedList","BtnRedo","BtnUnderline","textDecoration","BtnUndo","title","content","command","ButtonFactory","displayName","props","active","queryCommandState","onAction","type","onMouseDown","BtnStyles","createDropdown","items","DropdownFactory","Dropdown","selected","parseInt","commandArgument","preventDefault","selectedIndex","inputProps","hidden","map","item","index","key","HtmlButton","onClick","Separator","Toolbar","DefaultEditor"],"sources":["/Users/sofe/Documents/CodeBackup/PtiWebApps/node_modules/react-simple-wysiwyg/src/utils.ts","/Users/sofe/Documents/CodeBackup/PtiWebApps/node_modules/react-simple-wysiwyg/src/editor/ContentEditable.tsx","/Users/sofe/Documents/CodeBackup/PtiWebApps/node_modules/react-simple-wysiwyg/src/editor/EditorContext.tsx","/Users/sofe/Documents/CodeBackup/PtiWebApps/node_modules/react-simple-wysiwyg/src/editor/HtmlEditor.tsx","/Users/sofe/Documents/CodeBackup/PtiWebApps/node_modules/react-simple-wysiwyg/node_modules/rollup-plugin-styles/dist/runtime/inject-css.js","/Users/sofe/Documents/CodeBackup/PtiWebApps/node_modules/react-simple-wysiwyg/src/editor/Editor.tsx","/Users/sofe/Documents/CodeBackup/PtiWebApps/node_modules/react-simple-wysiwyg/src/toolbar/icons/OrderedListIcon.tsx","/Users/sofe/Documents/CodeBackup/PtiWebApps/node_modules/react-simple-wysiwyg/src/toolbar/icons/UnorderedListIcon.tsx","/Users/sofe/Documents/CodeBackup/PtiWebApps/node_modules/react-simple-wysiwyg/src/toolbar/buttons.tsx","/Users/sofe/Documents/CodeBackup/PtiWebApps/node_modules/react-simple-wysiwyg/src/toolbar/dropdowns.tsx","/Users/sofe/Documents/CodeBackup/PtiWebApps/node_modules/react-simple-wysiwyg/src/toolbar/HtmlButton.tsx","/Users/sofe/Documents/CodeBackup/PtiWebApps/node_modules/react-simple-wysiwyg/src/toolbar/Separator.tsx","/Users/sofe/Documents/CodeBackup/PtiWebApps/node_modules/react-simple-wysiwyg/src/toolbar/Toolbar.tsx","/Users/sofe/Documents/CodeBackup/PtiWebApps/node_modules/react-simple-wysiwyg/src/editor/DefaultEditor.tsx"],"sourcesContent":["export function getSelectedNode(): Node {\n  if ((document as any).selection) {\n    return (document as any).selection.createRange().parentElement();\n  }\n\n  const selection = window.getSelection();\n  if (selection.rangeCount > 0) {\n    return selection.getRangeAt(0).startContainer.parentNode;\n  }\n\n  return null;\n}\n\nexport function normalizeHtml(str: string): string {\n  return str && str.replace(/&nbsp;|\\u202F|\\u00A0/g, ' ');\n}\n\nexport function replaceCaret(el: HTMLElement) {\n  // Place the caret at the end of the element\n  const target = document.createTextNode('');\n  el.appendChild(target);\n\n  // do not move caret if element was not focused\n  const isTargetFocused = document.activeElement === el;\n  if (target !== null && target.nodeValue !== null && isTargetFocused) {\n    const sel = window.getSelection();\n    if (sel !== null) {\n      const range = document.createRange();\n      range.setStart(target, target.nodeValue.length);\n      range.collapse(true);\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n    if (el instanceof HTMLElement) el.focus();\n  }\n}\n","/* eslint-disable react/prop-types */\n\nimport {\n  createElement,\n  ForwardedRef,\n  forwardRef,\n  HTMLAttributes,\n  memo,\n  SyntheticEvent,\n  useEffect,\n  useMemo,\n  useRef,\n} from 'react';\nimport { normalizeHtml, replaceCaret } from '../utils';\n\n/**\n * Based on https://github.com/lovasoa/react-contenteditable\n * A simple component for an html element with editable contents.\n */\nexport const ContentEditable = memo(\n  forwardRef(function ContentEditable(\n    {\n      className,\n      disabled,\n      onBlur,\n      onKeyDown,\n      onKeyUp,\n      tagName,\n      value,\n      ...rest\n    }: ContentEditableProps,\n    ref: ForwardedRef<HTMLElement>,\n  ) {\n    const elRef = useRef<HTMLElement>();\n    const htmlRef = useRef(value);\n\n    useEffect(() => {\n      const el = elRef.current;\n      if (el && normalizeHtml(htmlRef.current) !== normalizeHtml(value)) {\n        htmlRef.current = value;\n        el.innerHTML = value;\n        replaceCaret(el);\n      }\n    });\n\n    return useMemo(() => {\n      function onSetRef($el: HTMLElement) {\n        elRef.current = $el;\n        if (typeof ref === 'function') {\n          ref($el);\n        } else if (typeof ref === 'object') {\n          // eslint-disable-next-line no-param-reassign\n          ref.current = $el;\n        }\n      }\n\n      function onChange(event: SyntheticEvent<any>) {\n        const el = elRef.current;\n        if (!el) {\n          return;\n        }\n\n        const elementHtml = el.innerHTML;\n        if (elementHtml !== htmlRef.current) {\n          rest.onChange?.({\n            ...event,\n            target: {\n              value: elementHtml,\n              name: rest.name,\n            } as any,\n          });\n        }\n\n        htmlRef.current = elementHtml;\n      }\n\n      return createElement(tagName || 'div', {\n        ...rest,\n        className,\n        contentEditable: !disabled,\n        dangerouslySetInnerHTML: { __html: value },\n        onBlur: onBlur || onChange,\n        onInput: onChange,\n        onKeyDown: onKeyDown || onChange,\n        onKeyUp: onKeyUp || onChange,\n        ref: onSetRef,\n      });\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [className, disabled, onBlur, onKeyDown, onKeyUp, tagName]);\n  }),\n);\n\nexport type ContentEditableEvent = SyntheticEvent<any, Event> & {\n  target: { name?: string; value: string };\n};\n\nexport interface ContentEditableProps extends HTMLAttributes<HTMLElement> {\n  disabled?: boolean;\n  contentEditableRef?: (el: HTMLElement) => void;\n  name?: string;\n  onChange?: (event: ContentEditableEvent) => void;\n  tagName?: string;\n  value?: string;\n}\n","import * as React from 'react';\nimport { createContext, ReactNode, useContext, useState } from 'react';\n\nexport const EditorContext = createContext<EditorState>(null);\n\nexport function EditorProvider({ children }: { children: ReactNode }) {\n  const [state, setState] = useState<EditorState>({\n    htmlMode: false,\n    update,\n  });\n\n  function update(attrs) {\n    setState((prevState) => {\n      return {\n        ...prevState,\n        ...attrs,\n        date: Date.now(),\n      };\n    });\n  }\n\n  return (\n    <EditorContext.Provider value={state}>{children}</EditorContext.Provider>\n  );\n}\n\nexport function useEditorState(): EditorState {\n  return useContext(EditorContext);\n}\n\nexport interface EditorState {\n  update(attrs: Partial<EditorState>): void;\n  $el?: HTMLElement;\n  $selection?: Node;\n  htmlMode: boolean;\n}\n","import * as React from 'react';\n\nexport function HtmlEditor({ ...rest }) {\n  return <textarea {...rest} />;\n}\n","var e=[],t=[];function n(n,r){if(n&&\"undefined\"!=typeof document){var a,s=!0===r.prepend?\"prepend\":\"append\",d=!0===r.singleTag,i=\"string\"==typeof r.container?document.querySelector(r.container):document.getElementsByTagName(\"head\")[0];if(d){var u=e.indexOf(i);-1===u&&(u=e.push(i)-1,t[u]={}),a=t[u]&&t[u][s]?t[u][s]:t[u][s]=c()}else a=c();65279===n.charCodeAt(0)&&(n=n.substring(1)),a.styleSheet?a.styleSheet.cssText+=n:a.appendChild(document.createTextNode(n))}function c(){var e=document.createElement(\"style\");if(e.setAttribute(\"type\",\"text/css\"),r.attributes)for(var t=Object.keys(r.attributes),n=0;n<t.length;n++)e.setAttribute(t[n],r.attributes[t[n]]);var a=\"prepend\"===s?\"afterbegin\":\"beforeend\";return i.insertAdjacentElement(a,e),e}}export{n as default};\n","import * as React from 'react';\nimport { SyntheticEvent, useEffect } from 'react';\nimport { getSelectedNode } from '../utils';\nimport { ContentEditable, ContentEditableProps } from './ContentEditable';\nimport { useEditorState } from './EditorContext';\nimport { HtmlEditor } from './HtmlEditor';\nimport '../styles.css';\n\nexport function Editor({ children, onSelect, ...rest }: EditorProps) {\n  const editorState = useEditorState();\n\n  useEffect(() => {\n    document.addEventListener('click', onClickOutside);\n    return () => document.removeEventListener('click', onClickOutside);\n  });\n\n  function onClickOutside(event: MouseEvent) {\n    if (event.target === editorState.$el) {\n      return;\n    }\n\n    if (editorState.$el?.contains(event.target as HTMLElement)) {\n      return;\n    }\n\n    editorState.update({ $selection: null });\n  }\n\n  function onTextSelect(event: SyntheticEvent<HTMLElement>) {\n    onSelect?.(event);\n    editorState.update({ $selection: getSelectedNode() });\n  }\n\n  function setContentEditableRef($el: HTMLElement) {\n    editorState.update({ $el });\n  }\n\n  if (editorState.htmlMode) {\n    return (\n      <div className=\"rsw-editor\">\n        {children}\n        <HtmlEditor {...rest} className=\"rsw-ce rsw-html\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"rsw-editor\">\n      {children}\n      <ContentEditable\n        {...rest}\n        ref={setContentEditableRef}\n        onSelect={onTextSelect}\n        className=\"rsw-ce\"\n      />\n    </div>\n  );\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface EditorProps extends ContentEditableProps {}\n","import * as React from 'react';\n\nexport default function OrderedListIcon() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 24 24\"\n      style={{ verticalAlign: 'text-top' }}\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M6.99938 12.998v-2H20.9994v2H6.99938zm0 6.0001v-2H20.9994v2H6.99938zm0-12.00001v-2H20.9994v2H6.99938zm-4 1v-3h-1v-1h2v4h-1zm-1 9.00001v-1h3v4h-3v-1h2v-.5h-1v-1h1v-.5h-2zM4.25 10c.41421 0 .75.3358.75.75 0 .2024-.08017.3861-.2105.521L3.11983 13H5v1H2v-.9218L4 11H2v-1h2.25z\"\n      />\n    </svg>\n  );\n}\n","import * as React from 'react';\n\nexport default function UnorderedListIcon() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 24 24\"\n      style={{ verticalAlign: 'text-top' }}\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M7 5h14v2H7V5zm0 8v-2h14v2H7zM4 4.50001c.83 0 1.5.66992 1.5 1.5 0 .83007-.67 1.5-1.5 1.5s-1.5-.66993-1.5-1.5c0-.83008.67-1.5 1.5-1.5zM4 10.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zM7 19v-2h14v2H7zm-3-2.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5z\"\n      />\n    </svg>\n  );\n}\n","import * as React from 'react';\nimport { HTMLAttributes, ReactNode } from 'react';\nimport { EditorState, useEditorState } from '../editor/EditorContext';\nimport OrderedListIcon from './icons/OrderedListIcon';\nimport UnorderedListIcon from './icons/UnorderedListIcon';\n\nexport const BtnBold = createButton('Bold', '𝐁', 'bold');\n\nexport const BtnBulletList = createButton(\n  'Bullet list',\n  <UnorderedListIcon />,\n  'insertUnorderedList',\n);\n\nexport const BtnClearFormatting = createButton(\n  'Clear formatting',\n  'T̲ₓ',\n  'removeFormat',\n);\n\nexport const BtnItalic = createButton('Italic', '𝑰', 'italic');\n\nexport const BtnLink = createButton('Link', '🔗', ({ $selection }) => {\n  if ($selection?.nodeName === 'A') {\n    document.execCommand('unlink');\n  } else {\n    // eslint-disable-next-line no-alert\n    document.execCommand('createLink', false, prompt('URL', ''));\n  }\n});\n\nexport const BtnNumberedList = createButton(\n  'Numbered list',\n  <OrderedListIcon />,\n  'insertOrderedList',\n);\n\nexport const BtnRedo = createButton('Redo', '↷', 'redo');\n\nexport const BtnUnderline = createButton(\n  'Underline',\n  <span style={{ textDecoration: 'underline' }}>𝐔</span>,\n  'underline',\n);\n\nexport const BtnUndo = createButton('Undo', '↶', 'undo');\n\nfunction createButton(\n  title: string,\n  content: ReactNode,\n  command: ((state: EditorState) => void) | string,\n) {\n  ButtonFactory.displayName = title.replace(/\\s/g, '');\n\n  return ButtonFactory;\n\n  function ButtonFactory(props: HTMLAttributes<HTMLButtonElement>) {\n    const editorState = useEditorState();\n    const { $selection } = editorState;\n\n    let active = false;\n    if (typeof command === 'string') {\n      active = !!$selection && document.queryCommandState(command);\n    }\n\n    function onAction() {\n      if (typeof command === 'function') {\n        command(editorState);\n      } else {\n        document.execCommand(command);\n      }\n    }\n\n    if (editorState.htmlMode) {\n      return null;\n    }\n\n    return (\n      <button\n        type=\"button\"\n        title={title}\n        {...props}\n        className=\"rsw-btn\"\n        onMouseDown={onAction}\n        data-active={active}\n      >\n        {content}\n      </button>\n    );\n  }\n}\n","import * as React from 'react';\nimport { ChangeEvent, HTMLAttributes } from 'react';\nimport { EditorState, useEditorState } from '../editor/EditorContext';\n\nexport const BtnStyles = createDropdown('Styles', [\n  ['Normal', 'formatBlock', 'DIV'],\n  ['𝗛𝗲𝗮𝗱𝗲𝗿 𝟭', 'formatBlock', 'H1'],\n  ['Header 2', 'formatBlock', 'H2'],\n  ['𝙲𝚘𝚍𝚎', 'formatBlock', 'PRE'],\n]);\n\nfunction createDropdown(title: string, items: DropDownItem[]): typeof Dropdown {\n  DropdownFactory.displayName = title;\n\n  return DropdownFactory;\n\n  function DropdownFactory(props: DropdownProps) {\n    const editorState = useEditorState();\n\n    if (editorState.htmlMode) {\n      return null;\n    }\n\n    return (\n      <Dropdown {...props} onChange={onChange} title={title} items={items} />\n    );\n\n    function onChange(e: ChangeEvent<HTMLSelectElement>) {\n      const selected = parseInt(e.target.value, 10);\n      const [, command, commandArgument] = items[selected];\n\n      e.preventDefault();\n      e.target.selectedIndex = 0;\n\n      if (typeof command === 'function') {\n        command(editorState);\n      } else {\n        document.execCommand(command, false, commandArgument);\n      }\n    }\n  }\n}\n\nexport function Dropdown({ items, selected, ...inputProps }: DropdownProps) {\n  return (\n    <select {...inputProps} value={selected} className=\"rsw-dd\">\n      <option hidden>{inputProps.title}</option>\n      {items.map((item, index) => (\n        <option key={item[2]} value={index}>\n          {item[0]}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nexport type DropDownItem = [\n  string,\n  string | ((editorState: EditorState) => void),\n  string,\n];\n\nexport interface DropdownProps extends HTMLAttributes<HTMLSelectElement> {\n  selected?: number;\n  items?: DropDownItem[];\n}\n","import * as React from 'react';\nimport { useEditorState } from '../editor/EditorContext';\n\nexport function HtmlButton({ ...rest }) {\n  const editorState = useEditorState();\n\n  function onClick() {\n    editorState.update({\n      htmlMode: !editorState.htmlMode,\n    });\n  }\n\n  return (\n    <button\n      type=\"button\"\n      title=\"HTML mode\"\n      className=\"rsw-btn\"\n      onClick={onClick}\n      data-active={editorState.htmlMode}\n      {...rest}\n    >\n      &lt;/&gt;\n    </button>\n  );\n}\n","import * as React from 'react';\nimport { useEditorState } from '../editor/EditorContext';\n\nexport function Separator() {\n  const editorState = useEditorState();\n\n  if (editorState.htmlMode) {\n    return null;\n  }\n\n  return <div className=\"rsw-separator\" />;\n}\n","import * as React from 'react';\nimport { HTMLAttributes } from 'react';\n\nexport function Toolbar(props: HTMLAttributes<HTMLDivElement>) {\n  return <div {...props} className=\"rsw-toolbar\" />;\n}\n","import * as React from 'react';\nimport { Editor, EditorProps } from './Editor';\nimport { EditorProvider } from './EditorContext';\nimport {\n  BtnBold,\n  BtnBulletList,\n  BtnClearFormatting,\n  BtnItalic,\n  BtnLink,\n  BtnNumberedList,\n  BtnRedo,\n  BtnStyles,\n  BtnUnderline,\n  BtnUndo,\n  HtmlButton,\n  Separator,\n  Toolbar,\n} from '../toolbar';\n\nexport function DefaultEditor(props: EditorProps) {\n  return (\n    <EditorProvider>\n      <Editor {...props}>\n        <Toolbar>\n          <BtnUndo />\n          <BtnRedo />\n          <Separator />\n          <BtnBold />\n          <BtnItalic />\n          <BtnUnderline />\n          <Separator />\n          <BtnNumberedList />\n          <BtnBulletList />\n          <Separator />\n          <BtnLink />\n          <BtnClearFormatting />\n          <HtmlButton />\n          <Separator />\n          <BtnStyles />\n        </Toolbar>\n      </Editor>\n    </EditorProvider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}