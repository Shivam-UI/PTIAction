"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.findMatchingElement = exports.isLoadable = exports.isSearchDifferent = exports.isPathsEqual = exports.isPathsDifferent = void 0;

var _react = _interopRequireDefault(require("react"));

var _reactRouter = require("react-router");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var isPathsDifferent = function isPathsDifferent(first, second) {
  var _first$location, _second$location;

  return ((_first$location = first.location) === null || _first$location === void 0 ? void 0 : _first$location.pathname) !== ((_second$location = second.location) === null || _second$location === void 0 ? void 0 : _second$location.pathname);
};

exports.isPathsDifferent = isPathsDifferent;

var isPathsEqual = function isPathsEqual(first, second) {
  var _first$location2, _second$location2;

  return ((_first$location2 = first.location) === null || _first$location2 === void 0 ? void 0 : _first$location2.pathname) === ((_second$location2 = second.location) === null || _second$location2 === void 0 ? void 0 : _second$location2.pathname);
};

exports.isPathsEqual = isPathsEqual;

var isSearchDifferent = function isSearchDifferent(first, second) {
  var _first$location3, _second$location3;

  return ((_first$location3 = first.location) === null || _first$location3 === void 0 ? void 0 : _first$location3.search) !== ((_second$location3 = second.location) === null || _second$location3 === void 0 ? void 0 : _second$location3.search);
};

exports.isSearchDifferent = isSearchDifferent;

var findMatchingRoute = function findMatchingRoute(context, routes) {
  var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (matchingElement) {};
  var match; // We use React.Children.forEach instead of React.Children.toArray().find()
  // here because toArray adds keys to all child elements and we do not want
  // to trigger an unmount/remount for two <Route>s that render the same
  // component at different URLs.

  _react["default"].Children.forEach(routes, function (child) {
    if (match == null && /*#__PURE__*/_react["default"].isValidElement(child)) {
      var _context$location;

      var path = child.props.path || child.props.from;
      match = path ? (0, _reactRouter.matchPath)((_context$location = context.location) === null || _context$location === void 0 ? void 0 : _context$location.pathname, _objectSpread(_objectSpread({}, child.props), {}, {
        path: path
      })) : context === null || context === void 0 ? void 0 : context.match;
      if (match) callback(child);
    }
  });

  return match;
};

var isLoadable = function isLoadable(context, routes) {
  var isLoadable;
  var match = findMatchingRoute(context, routes, function (matchingElement) {
    isLoadable = matchingElement.props.loading;
  });
  return match ? isLoadable : false;
};

exports.isLoadable = isLoadable;

var findMatchingElement = function findMatchingElement(context, routes) {
  var element;
  var match = findMatchingRoute(context, routes, function (matchingElement) {
    element = matchingElement;
  });
  return match ? /*#__PURE__*/_react["default"].cloneElement(element, {
    location: context.location,
    computedMatch: match
  }) : null;
};

exports.findMatchingElement = findMatchingElement;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlscy5qcyJdLCJuYW1lcyI6WyJpc1BhdGhzRGlmZmVyZW50IiwiZmlyc3QiLCJzZWNvbmQiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwiaXNQYXRoc0VxdWFsIiwiaXNTZWFyY2hEaWZmZXJlbnQiLCJzZWFyY2giLCJmaW5kTWF0Y2hpbmdSb3V0ZSIsImNvbnRleHQiLCJyb3V0ZXMiLCJjYWxsYmFjayIsIm1hdGNoaW5nRWxlbWVudCIsIm1hdGNoIiwiUmVhY3QiLCJDaGlsZHJlbiIsImZvckVhY2giLCJjaGlsZCIsImlzVmFsaWRFbGVtZW50IiwicGF0aCIsInByb3BzIiwiZnJvbSIsImlzTG9hZGFibGUiLCJsb2FkaW5nIiwiZmluZE1hdGNoaW5nRWxlbWVudCIsImVsZW1lbnQiLCJjbG9uZUVsZW1lbnQiLCJjb21wdXRlZE1hdGNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7Ozs7Ozs7QUFFTyxJQUFNQSxnQkFBZ0IsR0FBRyxTQUFuQkEsZ0JBQW1CLENBQUNDLEtBQUQsRUFBUUMsTUFBUjtBQUFBOztBQUFBLFNBQzVCLG9CQUFBRCxLQUFLLENBQUNFLFFBQU4sb0VBQWdCQyxRQUFoQiwyQkFBNkJGLE1BQU0sQ0FBQ0MsUUFBcEMscURBQTZCLGlCQUFpQkMsUUFBOUMsQ0FENEI7QUFBQSxDQUF6Qjs7OztBQUdBLElBQU1DLFlBQVksR0FBRyxTQUFmQSxZQUFlLENBQUNKLEtBQUQsRUFBUUMsTUFBUjtBQUFBOztBQUFBLFNBQ3hCLHFCQUFBRCxLQUFLLENBQUNFLFFBQU4sc0VBQWdCQyxRQUFoQiw0QkFBNkJGLE1BQU0sQ0FBQ0MsUUFBcEMsc0RBQTZCLGtCQUFpQkMsUUFBOUMsQ0FEd0I7QUFBQSxDQUFyQjs7OztBQUdBLElBQU1FLGlCQUFpQixHQUFHLFNBQXBCQSxpQkFBb0IsQ0FBQ0wsS0FBRCxFQUFRQyxNQUFSO0FBQUE7O0FBQUEsU0FDN0IscUJBQUFELEtBQUssQ0FBQ0UsUUFBTixzRUFBZ0JJLE1BQWhCLDRCQUEyQkwsTUFBTSxDQUFDQyxRQUFsQyxzREFBMkIsa0JBQWlCSSxNQUE1QyxDQUQ2QjtBQUFBLENBQTFCOzs7O0FBR1AsSUFBTUMsaUJBQWlCLEdBQUcsU0FBcEJBLGlCQUFvQixDQUFDQyxPQUFELEVBQVVDLE1BQVYsRUFBMEQ7QUFBQSxNQUF4Q0MsUUFBd0MsdUVBQTdCLFVBQUNDLGVBQUQsRUFBcUIsQ0FBRyxDQUFLO0FBQ2hGLE1BQUlDLEtBQUosQ0FEZ0YsQ0FHaEY7QUFDQTtBQUNBO0FBQ0E7O0FBQ0FDLG9CQUFNQyxRQUFOLENBQWVDLE9BQWYsQ0FBdUJOLE1BQXZCLEVBQStCLFVBQUFPLEtBQUssRUFBSTtBQUNwQyxRQUFJSixLQUFLLElBQUksSUFBVCxpQkFBaUJDLGtCQUFNSSxjQUFOLENBQXFCRCxLQUFyQixDQUFyQixFQUFrRDtBQUFBOztBQUM5QyxVQUFNRSxJQUFJLEdBQUdGLEtBQUssQ0FBQ0csS0FBTixDQUFZRCxJQUFaLElBQW9CRixLQUFLLENBQUNHLEtBQU4sQ0FBWUMsSUFBN0M7QUFFQVIsTUFBQUEsS0FBSyxHQUFHTSxJQUFJLEdBQ04saURBQVVWLE9BQU8sQ0FBQ04sUUFBbEIsc0RBQVUsa0JBQWtCQyxRQUE1QixrQ0FBMkNhLEtBQUssQ0FBQ0csS0FBakQ7QUFBd0RELFFBQUFBLElBQUksRUFBSkE7QUFBeEQsU0FETSxHQUVOVixPQUZNLGFBRU5BLE9BRk0sdUJBRU5BLE9BQU8sQ0FBRUksS0FGZjtBQUlBLFVBQUlBLEtBQUosRUFDSUYsUUFBUSxDQUFDTSxLQUFELENBQVI7QUFDUDtBQUNKLEdBWEQ7O0FBYUEsU0FBT0osS0FBUDtBQUNILENBckJEOztBQXVCTyxJQUFNUyxVQUFVLEdBQUcsb0JBQUNiLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUMzQyxNQUFJWSxVQUFKO0FBRUEsTUFBTVQsS0FBSyxHQUFHTCxpQkFBaUIsQ0FDM0JDLE9BRDJCLEVBRTNCQyxNQUYyQixFQUczQixVQUFDRSxlQUFELEVBQXFCO0FBQUVVLElBQUFBLFVBQVUsR0FBR1YsZUFBZSxDQUFDUSxLQUFoQixDQUFzQkcsT0FBbkM7QUFBNkMsR0FIekMsQ0FBL0I7QUFNQSxTQUFPVixLQUFLLEdBQUdTLFVBQUgsR0FBZ0IsS0FBNUI7QUFDSCxDQVZNOzs7O0FBWUEsSUFBTUUsbUJBQW1CLEdBQUcsU0FBdEJBLG1CQUFzQixDQUFDZixPQUFELEVBQVVDLE1BQVYsRUFBcUI7QUFDcEQsTUFBSWUsT0FBSjtBQUVBLE1BQU1aLEtBQUssR0FBR0wsaUJBQWlCLENBQzNCQyxPQUQyQixFQUUzQkMsTUFGMkIsRUFHM0IsVUFBQ0UsZUFBRCxFQUFxQjtBQUFFYSxJQUFBQSxPQUFPLEdBQUdiLGVBQVY7QUFBNEIsR0FIeEIsQ0FBL0I7QUFNQSxTQUFPQyxLQUFLLGdCQUNOQyxrQkFBTVksWUFBTixDQUFtQkQsT0FBbkIsRUFBNEI7QUFBRXRCLElBQUFBLFFBQVEsRUFBRU0sT0FBTyxDQUFDTixRQUFwQjtBQUE4QndCLElBQUFBLGFBQWEsRUFBRWQ7QUFBN0MsR0FBNUIsQ0FETSxHQUVOLElBRk47QUFHSCxDQVpNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IG1hdGNoUGF0aCB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5cbmV4cG9ydCBjb25zdCBpc1BhdGhzRGlmZmVyZW50ID0gKGZpcnN0LCBzZWNvbmQpID0+XG4gICAgZmlyc3QubG9jYXRpb24/LnBhdGhuYW1lICE9PSBzZWNvbmQubG9jYXRpb24/LnBhdGhuYW1lO1xuXG5leHBvcnQgY29uc3QgaXNQYXRoc0VxdWFsID0gKGZpcnN0LCBzZWNvbmQpID0+XG4gICAgZmlyc3QubG9jYXRpb24/LnBhdGhuYW1lID09PSBzZWNvbmQubG9jYXRpb24/LnBhdGhuYW1lO1xuXG5leHBvcnQgY29uc3QgaXNTZWFyY2hEaWZmZXJlbnQgPSAoZmlyc3QsIHNlY29uZCkgPT5cbiAgICBmaXJzdC5sb2NhdGlvbj8uc2VhcmNoICE9PSBzZWNvbmQubG9jYXRpb24/LnNlYXJjaDtcblxuY29uc3QgZmluZE1hdGNoaW5nUm91dGUgPSAoY29udGV4dCwgcm91dGVzLCBjYWxsYmFjayA9IChtYXRjaGluZ0VsZW1lbnQpID0+IHsgfSkgPT4ge1xuICAgIGxldCBtYXRjaDtcblxuICAgIC8vIFdlIHVzZSBSZWFjdC5DaGlsZHJlbi5mb3JFYWNoIGluc3RlYWQgb2YgUmVhY3QuQ2hpbGRyZW4udG9BcnJheSgpLmZpbmQoKVxuICAgIC8vIGhlcmUgYmVjYXVzZSB0b0FycmF5IGFkZHMga2V5cyB0byBhbGwgY2hpbGQgZWxlbWVudHMgYW5kIHdlIGRvIG5vdCB3YW50XG4gICAgLy8gdG8gdHJpZ2dlciBhbiB1bm1vdW50L3JlbW91bnQgZm9yIHR3byA8Um91dGU+cyB0aGF0IHJlbmRlciB0aGUgc2FtZVxuICAgIC8vIGNvbXBvbmVudCBhdCBkaWZmZXJlbnQgVVJMcy5cbiAgICBSZWFjdC5DaGlsZHJlbi5mb3JFYWNoKHJvdXRlcywgY2hpbGQgPT4ge1xuICAgICAgICBpZiAobWF0Y2ggPT0gbnVsbCAmJiBSZWFjdC5pc1ZhbGlkRWxlbWVudChjaGlsZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBjaGlsZC5wcm9wcy5wYXRoIHx8IGNoaWxkLnByb3BzLmZyb207XG5cbiAgICAgICAgICAgIG1hdGNoID0gcGF0aFxuICAgICAgICAgICAgICAgID8gbWF0Y2hQYXRoKGNvbnRleHQubG9jYXRpb24/LnBhdGhuYW1lLCB7IC4uLmNoaWxkLnByb3BzLCBwYXRoIH0pXG4gICAgICAgICAgICAgICAgOiBjb250ZXh0Py5tYXRjaDtcblxuICAgICAgICAgICAgaWYgKG1hdGNoKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGNoaWxkKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG1hdGNoO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzTG9hZGFibGUgPSAoY29udGV4dCwgcm91dGVzKSA9PiB7XG4gICAgbGV0IGlzTG9hZGFibGU7XG5cbiAgICBjb25zdCBtYXRjaCA9IGZpbmRNYXRjaGluZ1JvdXRlKFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICByb3V0ZXMsXG4gICAgICAgIChtYXRjaGluZ0VsZW1lbnQpID0+IHsgaXNMb2FkYWJsZSA9IG1hdGNoaW5nRWxlbWVudC5wcm9wcy5sb2FkaW5nOyB9XG4gICAgKTtcblxuICAgIHJldHVybiBtYXRjaCA/IGlzTG9hZGFibGUgOiBmYWxzZTtcbn07XG5cbmV4cG9ydCBjb25zdCBmaW5kTWF0Y2hpbmdFbGVtZW50ID0gKGNvbnRleHQsIHJvdXRlcykgPT4ge1xuICAgIGxldCBlbGVtZW50O1xuXG4gICAgY29uc3QgbWF0Y2ggPSBmaW5kTWF0Y2hpbmdSb3V0ZShcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgcm91dGVzLFxuICAgICAgICAobWF0Y2hpbmdFbGVtZW50KSA9PiB7IGVsZW1lbnQgPSBtYXRjaGluZ0VsZW1lbnQ7IH1cbiAgICApO1xuXG4gICAgcmV0dXJuIG1hdGNoXG4gICAgICAgID8gUmVhY3QuY2xvbmVFbGVtZW50KGVsZW1lbnQsIHsgbG9jYXRpb246IGNvbnRleHQubG9jYXRpb24sIGNvbXB1dGVkTWF0Y2g6IG1hdGNoIH0pXG4gICAgICAgIDogbnVsbDtcbn07XG4iXX0=