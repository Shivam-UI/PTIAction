{"version":3,"file":"index.js","sources":["../../src/utils.ts","../../src/editor/ContentEditable.tsx","../../src/editor/EditorContext.tsx","../../src/editor/HtmlEditor.tsx","../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js","../../src/editor/Editor.tsx","../../src/toolbar/icons/OrderedListIcon.tsx","../../src/toolbar/icons/UnorderedListIcon.tsx","../../src/toolbar/buttons.tsx","../../src/toolbar/dropdowns.tsx","../../src/toolbar/HtmlButton.tsx","../../src/toolbar/Separator.tsx","../../src/toolbar/Toolbar.tsx","../../src/editor/DefaultEditor.tsx"],"sourcesContent":["export function getSelectedNode(): Node {\n  if ((document as any).selection) {\n    return (document as any).selection.createRange().parentElement();\n  }\n\n  const selection = window.getSelection();\n  if (selection.rangeCount > 0) {\n    return selection.getRangeAt(0).startContainer.parentNode;\n  }\n\n  return null;\n}\n\nexport function normalizeHtml(str: string): string {\n  return str && str.replace(/&nbsp;|\\u202F|\\u00A0/g, ' ');\n}\n\nexport function replaceCaret(el: HTMLElement) {\n  // Place the caret at the end of the element\n  const target = document.createTextNode('');\n  el.appendChild(target);\n\n  // do not move caret if element was not focused\n  const isTargetFocused = document.activeElement === el;\n  if (target !== null && target.nodeValue !== null && isTargetFocused) {\n    const sel = window.getSelection();\n    if (sel !== null) {\n      const range = document.createRange();\n      range.setStart(target, target.nodeValue.length);\n      range.collapse(true);\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n    if (el instanceof HTMLElement) el.focus();\n  }\n}\n","/* eslint-disable react/prop-types */\n\nimport {\n  createElement,\n  ForwardedRef,\n  forwardRef,\n  HTMLAttributes,\n  memo,\n  SyntheticEvent,\n  useEffect,\n  useMemo,\n  useRef,\n} from 'react';\nimport { normalizeHtml, replaceCaret } from '../utils';\n\n/**\n * Based on https://github.com/lovasoa/react-contenteditable\n * A simple component for an html element with editable contents.\n */\nexport const ContentEditable = memo(\n  forwardRef(function ContentEditable(\n    {\n      className,\n      disabled,\n      onBlur,\n      onKeyDown,\n      onKeyUp,\n      tagName,\n      value,\n      ...rest\n    }: ContentEditableProps,\n    ref: ForwardedRef<HTMLElement>,\n  ) {\n    const elRef = useRef<HTMLElement>();\n    const htmlRef = useRef(value);\n\n    useEffect(() => {\n      const el = elRef.current;\n      if (el && normalizeHtml(htmlRef.current) !== normalizeHtml(value)) {\n        htmlRef.current = value;\n        el.innerHTML = value;\n        replaceCaret(el);\n      }\n    });\n\n    return useMemo(() => {\n      function onSetRef($el: HTMLElement) {\n        elRef.current = $el;\n        if (typeof ref === 'function') {\n          ref($el);\n        } else if (typeof ref === 'object') {\n          // eslint-disable-next-line no-param-reassign\n          ref.current = $el;\n        }\n      }\n\n      function onChange(event: SyntheticEvent<any>) {\n        const el = elRef.current;\n        if (!el) {\n          return;\n        }\n\n        const elementHtml = el.innerHTML;\n        if (elementHtml !== htmlRef.current) {\n          rest.onChange?.({\n            ...event,\n            target: {\n              value: elementHtml,\n              name: rest.name,\n            } as any,\n          });\n        }\n\n        htmlRef.current = elementHtml;\n      }\n\n      return createElement(tagName || 'div', {\n        ...rest,\n        className,\n        contentEditable: !disabled,\n        dangerouslySetInnerHTML: { __html: value },\n        onBlur: onBlur || onChange,\n        onInput: onChange,\n        onKeyDown: onKeyDown || onChange,\n        onKeyUp: onKeyUp || onChange,\n        ref: onSetRef,\n      });\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [className, disabled, onBlur, onKeyDown, onKeyUp, tagName]);\n  }),\n);\n\nexport type ContentEditableEvent = SyntheticEvent<any, Event> & {\n  target: { name?: string; value: string };\n};\n\nexport interface ContentEditableProps extends HTMLAttributes<HTMLElement> {\n  disabled?: boolean;\n  contentEditableRef?: (el: HTMLElement) => void;\n  name?: string;\n  onChange?: (event: ContentEditableEvent) => void;\n  tagName?: string;\n  value?: string;\n}\n","import * as React from 'react';\nimport { createContext, ReactNode, useContext, useState } from 'react';\n\nexport const EditorContext = createContext<EditorState>(null);\n\nexport function EditorProvider({ children }: { children: ReactNode }) {\n  const [state, setState] = useState<EditorState>({\n    htmlMode: false,\n    update,\n  });\n\n  function update(attrs) {\n    setState((prevState) => {\n      return {\n        ...prevState,\n        ...attrs,\n        date: Date.now(),\n      };\n    });\n  }\n\n  return (\n    <EditorContext.Provider value={state}>{children}</EditorContext.Provider>\n  );\n}\n\nexport function useEditorState(): EditorState {\n  return useContext(EditorContext);\n}\n\nexport interface EditorState {\n  update(attrs: Partial<EditorState>): void;\n  $el?: HTMLElement;\n  $selection?: Node;\n  htmlMode: boolean;\n}\n","import * as React from 'react';\n\nexport function HtmlEditor({ ...rest }) {\n  return <textarea {...rest} />;\n}\n","var e=[],t=[];function n(n,r){if(n&&\"undefined\"!=typeof document){var a,s=!0===r.prepend?\"prepend\":\"append\",d=!0===r.singleTag,i=\"string\"==typeof r.container?document.querySelector(r.container):document.getElementsByTagName(\"head\")[0];if(d){var u=e.indexOf(i);-1===u&&(u=e.push(i)-1,t[u]={}),a=t[u]&&t[u][s]?t[u][s]:t[u][s]=c()}else a=c();65279===n.charCodeAt(0)&&(n=n.substring(1)),a.styleSheet?a.styleSheet.cssText+=n:a.appendChild(document.createTextNode(n))}function c(){var e=document.createElement(\"style\");if(e.setAttribute(\"type\",\"text/css\"),r.attributes)for(var t=Object.keys(r.attributes),n=0;n<t.length;n++)e.setAttribute(t[n],r.attributes[t[n]]);var a=\"prepend\"===s?\"afterbegin\":\"beforeend\";return i.insertAdjacentElement(a,e),e}}export{n as default};\n","import * as React from 'react';\nimport { SyntheticEvent, useEffect } from 'react';\nimport { getSelectedNode } from '../utils';\nimport { ContentEditable, ContentEditableProps } from './ContentEditable';\nimport { useEditorState } from './EditorContext';\nimport { HtmlEditor } from './HtmlEditor';\nimport '../styles.css';\n\nexport function Editor({ children, onSelect, ...rest }: EditorProps) {\n  const editorState = useEditorState();\n\n  useEffect(() => {\n    document.addEventListener('click', onClickOutside);\n    return () => document.removeEventListener('click', onClickOutside);\n  });\n\n  function onClickOutside(event: MouseEvent) {\n    if (event.target === editorState.$el) {\n      return;\n    }\n\n    if (editorState.$el?.contains(event.target as HTMLElement)) {\n      return;\n    }\n\n    editorState.update({ $selection: null });\n  }\n\n  function onTextSelect(event: SyntheticEvent<HTMLElement>) {\n    onSelect?.(event);\n    editorState.update({ $selection: getSelectedNode() });\n  }\n\n  function setContentEditableRef($el: HTMLElement) {\n    editorState.update({ $el });\n  }\n\n  if (editorState.htmlMode) {\n    return (\n      <div className=\"rsw-editor\">\n        {children}\n        <HtmlEditor {...rest} className=\"rsw-ce rsw-html\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"rsw-editor\">\n      {children}\n      <ContentEditable\n        {...rest}\n        ref={setContentEditableRef}\n        onSelect={onTextSelect}\n        className=\"rsw-ce\"\n      />\n    </div>\n  );\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface EditorProps extends ContentEditableProps {}\n","import * as React from 'react';\n\nexport default function OrderedListIcon() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 24 24\"\n      style={{ verticalAlign: 'text-top' }}\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M6.99938 12.998v-2H20.9994v2H6.99938zm0 6.0001v-2H20.9994v2H6.99938zm0-12.00001v-2H20.9994v2H6.99938zm-4 1v-3h-1v-1h2v4h-1zm-1 9.00001v-1h3v4h-3v-1h2v-.5h-1v-1h1v-.5h-2zM4.25 10c.41421 0 .75.3358.75.75 0 .2024-.08017.3861-.2105.521L3.11983 13H5v1H2v-.9218L4 11H2v-1h2.25z\"\n      />\n    </svg>\n  );\n}\n","import * as React from 'react';\n\nexport default function UnorderedListIcon() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 24 24\"\n      style={{ verticalAlign: 'text-top' }}\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M7 5h14v2H7V5zm0 8v-2h14v2H7zM4 4.50001c.83 0 1.5.66992 1.5 1.5 0 .83007-.67 1.5-1.5 1.5s-1.5-.66993-1.5-1.5c0-.83008.67-1.5 1.5-1.5zM4 10.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zM7 19v-2h14v2H7zm-3-2.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5z\"\n      />\n    </svg>\n  );\n}\n","import * as React from 'react';\nimport { HTMLAttributes, ReactNode } from 'react';\nimport { EditorState, useEditorState } from '../editor/EditorContext';\nimport OrderedListIcon from './icons/OrderedListIcon';\nimport UnorderedListIcon from './icons/UnorderedListIcon';\n\nexport const BtnBold = createButton('Bold', 'ùêÅ', 'bold');\n\nexport const BtnBulletList = createButton(\n  'Bullet list',\n  <UnorderedListIcon />,\n  'insertUnorderedList',\n);\n\nexport const BtnClearFormatting = createButton(\n  'Clear formatting',\n  'TÃ≤‚Çì',\n  'removeFormat',\n);\n\nexport const BtnItalic = createButton('Italic', 'ùë∞', 'italic');\n\nexport const BtnLink = createButton('Link', 'üîó', ({ $selection }) => {\n  if ($selection?.nodeName === 'A') {\n    document.execCommand('unlink');\n  } else {\n    // eslint-disable-next-line no-alert\n    document.execCommand('createLink', false, prompt('URL', ''));\n  }\n});\n\nexport const BtnNumberedList = createButton(\n  'Numbered list',\n  <OrderedListIcon />,\n  'insertOrderedList',\n);\n\nexport const BtnRedo = createButton('Redo', '‚Ü∑', 'redo');\n\nexport const BtnUnderline = createButton(\n  'Underline',\n  <span style={{ textDecoration: 'underline' }}>ùêî</span>,\n  'underline',\n);\n\nexport const BtnUndo = createButton('Undo', '‚Ü∂', 'undo');\n\nfunction createButton(\n  title: string,\n  content: ReactNode,\n  command: ((state: EditorState) => void) | string,\n) {\n  ButtonFactory.displayName = title.replace(/\\s/g, '');\n\n  return ButtonFactory;\n\n  function ButtonFactory(props: HTMLAttributes<HTMLButtonElement>) {\n    const editorState = useEditorState();\n    const { $selection } = editorState;\n\n    let active = false;\n    if (typeof command === 'string') {\n      active = !!$selection && document.queryCommandState(command);\n    }\n\n    function onAction() {\n      if (typeof command === 'function') {\n        command(editorState);\n      } else {\n        document.execCommand(command);\n      }\n    }\n\n    if (editorState.htmlMode) {\n      return null;\n    }\n\n    return (\n      <button\n        type=\"button\"\n        title={title}\n        {...props}\n        className=\"rsw-btn\"\n        onMouseDown={onAction}\n        data-active={active}\n      >\n        {content}\n      </button>\n    );\n  }\n}\n","import * as React from 'react';\nimport { ChangeEvent, HTMLAttributes } from 'react';\nimport { EditorState, useEditorState } from '../editor/EditorContext';\n\nexport const BtnStyles = createDropdown('Styles', [\n  ['Normal', 'formatBlock', 'DIV'],\n  ['ùóõùó≤ùóÆùó±ùó≤ùóø ùü≠', 'formatBlock', 'H1'],\n  ['Header 2', 'formatBlock', 'H2'],\n  ['ùô≤ùöòùöçùöé', 'formatBlock', 'PRE'],\n]);\n\nfunction createDropdown(title: string, items: DropDownItem[]): typeof Dropdown {\n  DropdownFactory.displayName = title;\n\n  return DropdownFactory;\n\n  function DropdownFactory(props: DropdownProps) {\n    const editorState = useEditorState();\n\n    if (editorState.htmlMode) {\n      return null;\n    }\n\n    return (\n      <Dropdown {...props} onChange={onChange} title={title} items={items} />\n    );\n\n    function onChange(e: ChangeEvent<HTMLSelectElement>) {\n      const selected = parseInt(e.target.value, 10);\n      const [, command, commandArgument] = items[selected];\n\n      e.preventDefault();\n      e.target.selectedIndex = 0;\n\n      if (typeof command === 'function') {\n        command(editorState);\n      } else {\n        document.execCommand(command, false, commandArgument);\n      }\n    }\n  }\n}\n\nexport function Dropdown({ items, selected, ...inputProps }: DropdownProps) {\n  return (\n    <select {...inputProps} value={selected} className=\"rsw-dd\">\n      <option hidden>{inputProps.title}</option>\n      {items.map((item, index) => (\n        <option key={item[2]} value={index}>\n          {item[0]}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nexport type DropDownItem = [\n  string,\n  string | ((editorState: EditorState) => void),\n  string,\n];\n\nexport interface DropdownProps extends HTMLAttributes<HTMLSelectElement> {\n  selected?: number;\n  items?: DropDownItem[];\n}\n","import * as React from 'react';\nimport { useEditorState } from '../editor/EditorContext';\n\nexport function HtmlButton({ ...rest }) {\n  const editorState = useEditorState();\n\n  function onClick() {\n    editorState.update({\n      htmlMode: !editorState.htmlMode,\n    });\n  }\n\n  return (\n    <button\n      type=\"button\"\n      title=\"HTML mode\"\n      className=\"rsw-btn\"\n      onClick={onClick}\n      data-active={editorState.htmlMode}\n      {...rest}\n    >\n      &lt;/&gt;\n    </button>\n  );\n}\n","import * as React from 'react';\nimport { useEditorState } from '../editor/EditorContext';\n\nexport function Separator() {\n  const editorState = useEditorState();\n\n  if (editorState.htmlMode) {\n    return null;\n  }\n\n  return <div className=\"rsw-separator\" />;\n}\n","import * as React from 'react';\nimport { HTMLAttributes } from 'react';\n\nexport function Toolbar(props: HTMLAttributes<HTMLDivElement>) {\n  return <div {...props} className=\"rsw-toolbar\" />;\n}\n","import * as React from 'react';\nimport { Editor, EditorProps } from './Editor';\nimport { EditorProvider } from './EditorContext';\nimport {\n  BtnBold,\n  BtnBulletList,\n  BtnClearFormatting,\n  BtnItalic,\n  BtnLink,\n  BtnNumberedList,\n  BtnRedo,\n  BtnStyles,\n  BtnUnderline,\n  BtnUndo,\n  HtmlButton,\n  Separator,\n  Toolbar,\n} from '../toolbar';\n\nexport function DefaultEditor(props: EditorProps) {\n  return (\n    <EditorProvider>\n      <Editor {...props}>\n        <Toolbar>\n          <BtnUndo />\n          <BtnRedo />\n          <Separator />\n          <BtnBold />\n          <BtnItalic />\n          <BtnUnderline />\n          <Separator />\n          <BtnNumberedList />\n          <BtnBulletList />\n          <Separator />\n          <BtnLink />\n          <BtnClearFormatting />\n          <HtmlButton />\n          <Separator />\n          <BtnStyles />\n        </Toolbar>\n      </Editor>\n    </EditorProvider>\n  );\n}\n"],"names":["memo","forwardRef","useRef","useEffect","useMemo","createElement","createContext","useState","React","useContext"],"mappings":"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"}